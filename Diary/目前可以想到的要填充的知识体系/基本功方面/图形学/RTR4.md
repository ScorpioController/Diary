
# 2 现代图形渲染管线

渲染管线的基本架构：
 - 应用阶段
   - 通常在CPU中进行（也存在利用GPU的计算着色器这样的独立模式）
     负责处理渲染数据并将数据传递给下一个阶段
 - 几何阶段
   - 顶点着色
     - 变换
       - 模型空间
       - 世界空间
       - 相机空间
   - 投影
     - 将视椎体变换为标准立方体（常用的方式有正交投影和透视投影）
   - 【可选】曲面细分
     - 根据和摄像机的距离为模型优化三角形数目
   - 【可选】几何着色
     - 常用于粒子生成，将顶点转换为始终面向观察者的正方形图元
   - 【可选】流式输出
     - 常用于粒子模拟，将GPU作为几何引擎，将处理好的图元输入到CPU和GPU都可以访问的缓冲区中
   - 裁剪
     - 根据图元是否在标准立方体内进行裁剪，舍弃不需要的顶点并增加边界顶点
   - 屏幕映射
     - 将处于可视空间内部的图元坐标转换为屏幕坐标（映射到屏幕视图内，其中z值会被单独提取出来）
 - 光栅化阶段
   - 三角形设置
     - 根据上个阶段得到的顶点串联三角形，并得到覆盖的像素坐标
   - 三角形遍历
     - 判断像素的覆盖情况并在覆盖的像素位置生成片元，片元包含了很多数据状态
 - 像素阶段
   - 像素着色
     - 使用上个阶段的片元状态数据进行逐像素的颜色计算，存储到颜色缓冲中
   - 合并
     - 组合颜色缓冲中的颜色得到最终的像素颜色，最终输出到帧缓冲区（这个过程包含有如深度测试和模板测试等操作，还有关于透明处理的内容）